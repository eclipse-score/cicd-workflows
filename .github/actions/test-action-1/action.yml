# *******************************************************************************
# Copyright (c) 2025 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0
#
# SPDX-License-Identifier: Apache-2.0
# *******************************************************************************

name: Test-Action-1
description: A simple test action 1 that prints "Hello, World!"

runs:
  using: composite
  steps:
    - name: Hello World
      shell: bash
      run: |
        echo "Hello, World from Test-Action-1! This is a test action."
        ls -al
        tree
        echo "cd into _temp"
        cd /home/runner/work/_temp
        ls -al
        tree

    - name: run test.sh
      shell: bash
      run: |
        ls -al
        tree
        echo "cd into _temp"
        cd /home/runner/work/_temp
        ls -al
        tree
        echo "Running test.sh from Test-Action-1"
        .github/actions/test-action-1/test.sh

    - name: Checkout cicd-workflows repository
      uses: actions/checkout@v4
      with:
        repository: eclipse-score/cicd-workflows
        path: local-cicd-workflows

    - shell: bash
      run: git rev-parse HEAD
      working-directory: ${{ github.action_path }}

    - name: Set GitHub Path
      run: echo "$GITHUB_ACTION_PATH" >> $GITHUB_PATH
      shell: bash
      env:
        GITHUB_ACTION_PATH: ${{ github.action_path }}

    - name: Call Test-Action-2
      uses: ./local-cicd-workflows/.github/actions/test-action-2
